apiVersion: apps/v1
kind: Deployment
metadata:
  name: users-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: users-app
  template:
    metadata:
      labels:
        app: users-app
    spec:
      containers:
        - name: users-app
          image: huseyin/kub-demo-users:latest
          env:    
            - name: AUTH_ADDRESS
              #value: localhost              # Containers work in pod like in host machine. So we can use container name in our project for connection
              value: "auth-service.default"  # <service_name.namespace>. If we use pod by pod connection, our container can find with service. Because pod name is changeable.
                                             # This variabled auto generated by kubernetes with coreDNS feature. Core DNS have ip adresses for urls. For example. 192.1.1.2 auth_service.default
                                             # Kubernetes generate a env variable for service. AUTH_SERVICE_SERVICE_HOST. We can add this variable in project and use it atomatically.
          resources:
            limits:
              memory: 200Mi
              cpu: 500Mb
        #- name: auth-app
        #  image: huseyin/kub-demo-auth:latest